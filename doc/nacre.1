.\" Automatically generated by Pandoc 3.5
.\"
.TH "nacre" "1" "2025\-06\-27" "nacre 1.0.0" "Execute embedded scripts"
.SH NAME
nacre \- execute embedded shell scripts
.SH SYNOPSIS
\f[B]nacre\f[R] [\f[I]OPTIONS\f[R]]...
.SH DESCRIPTION
Used to execute shell scripts embedded within text files, and replace
those embedded scripts with their STDOUT results.
.PP
By default, the input for the nacre is read from the STDIN and the
output printed to the STDOUT.
These can be redirected via file redirection or the \-i and \-o flags.
.PP
The default delimiter used to mark an embedded script is the opening tag
\[lq]!((\[rq] and the closing tag \[lq]))!\[rq].
Backslashes can be used to escape these sequences if needed and the
delimiter can be changed with the \-d flag.
.PP
The embedded scripts are called from the directory that nacre is called
from.
.SH OPTIONS
.TP
\-i, \-\-input
The input file.
Defaults to the STDIN.
.TP
\-o, \-\-output
The output file.
Defaults to the STDOUT.
.TP
\-d, \-\-delimiters
Overrides the default delimiters \[lq]!(( ))!\[rq].
Separate the opening and closing tags with a space.
.TP
\-h, \-\-help
Prints a help menu.
.TP
\-V, \-\-version
Prints the current version of the program.
.SH BUGS
.IP "1." 3
The characters \[lq]<\[rq] and \[lq]>\[rq] cannot be used as a part of a
delimiter.
.PP
Report bugs to \c
.MT mdvorak.personal@gmail.com
.ME \c
\&.
.SH EXAMPLES
Including partial files:
.IP
.EX
$ cat main.md
# Header

!((cat ./partial.md))!

And some text from the main file.
$ cat partial.md
Some text from a partial file.
$ nacre \-i main.md \-o out.md
$ cat out.md
# Header

Some text from a partial file.

And some text from the main file.
.EE
.PP
Including directory listings:
.IP
.EX
$ ls ./src/ \-1
Element.hs
Main.hs
Markup.hs
Patterns.hs
$ cat list.md
# All files in the \[ga]./src/\[ga] directory

There are !((ls ./src./ \-1 | wc \-l))! file(s) in the \[ga]./src/\[ga] directory:

!((
for FILE in $(ls ./src/ \-1)
do echo \[dq]\- \[ga]$FILE\[ga]\[dq]
done
))!
$ nacre < list.md
# All files in the \[ga]./src/\[ga] directory

There are 4 file(s) in the \[ga]./src/\[ga] directory:

\- \[ga]Element.hs\[ga]
\- \[ga]Main.hs\[ga]
\- \[ga]Markup.hs\[ga]
\- \[ga]Patterns.hs\[ga]
.EE
.PP
Changing the delimiter:
.IP
.EX
$ cat in.html
<h1>Sub\-pages</h1>
##(
for PAGE in $(ls ./pages/*.html \-1)
do
    htag a \[dq]$(basename \[dq]$PAGE\[dq] .html)\[dq] \[rs]
        \-\-href \[dq]$PAGE\[dq] \[rs]
        | htag li
done | htag ul
)##
$ cat in.html | nacre \-d \[dq]##( )##\[dq] > out.html
$ cat out.html
<h1>Sub\-pages</h1>
<ul>
  <li><a href=\[dq]./pages/about.html\[dq]>about</a></li>
  <li><a href=\[dq]./pages/contact.html\[dq]>contact</a></li>
  <li><a href=\[dq]./pages/resources.html\[dq]>resources</a></li>
</ul>
.EE
.SH SEE ALSO
Source code can be found at \c
.UR https://github.com/mdvorak340/nacre
.UE \c
\&.
